(this.webpackJsonpgitissues=this.webpackJsonpgitissues||[]).push([[0],{16:function(e,t,a){e.exports=a(53)},53:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(5),c=a.n(s);var o=function(){return r.a.createElement("header",null,r.a.createElement("h1",null,r.a.createElement("i",{className:"fab fa-github"})," GitIssues"))};var l=function(){var e=(new Date).getFullYear();return r.a.createElement("footer",null,r.a.createElement("p",null,"Matthew Cheng \u24d2 ",e))},i=a(3),u=a.n(i),m=a(6),d=a(4),p=Object(n.createContext)(),f=function(e){var t=JSON.parse(localStorage.getItem("loggedIn"))||!1,a=JSON.parse(localStorage.getItem("repoData"))||[],s=JSON.parse(localStorage.getItem("token"))||"",c=JSON.parse(localStorage.getItem("userData"))||[],o=JSON.parse(localStorage.getItem("issueData"))||{},l=JSON.parse(localStorage.getItem("active"))||"",i=Object(n.useState)(t),u=Object(d.a)(i,2),m=u[0],f=u[1],g=Object(n.useState)(c),E=Object(d.a)(g,2),v=E[0],b=E[1],h=Object(n.useState)(""),O=Object(d.a)(h,2),j=O[0],N=O[1],y=Object(n.useState)(s),S=Object(d.a)(y,2),I=S[0],x=S[1],D=Object(n.useState)(a),k=Object(d.a)(D,2),w=k[0],C=k[1],J=Object(n.useState)(l),T=Object(d.a)(J,2),L=T[0],U=T[1],A=Object(n.useState)(o),M=Object(d.a)(A,2),R=M[0],B=M[1],K=Object(n.useState)(!1),P=Object(d.a)(K,2),G=P[0],z=P[1];Object(n.useEffect)((function(){localStorage.setItem("loggedIn",JSON.stringify(m))}),[m]),Object(n.useEffect)((function(){localStorage.setItem("repoData",JSON.stringify(w))}),[w]),Object(n.useEffect)((function(){localStorage.setItem("userData",JSON.stringify(v))}),[v]),Object(n.useEffect)((function(){localStorage.setItem("token",JSON.stringify(I))}),[I]),Object(n.useEffect)((function(){localStorage.setItem("issueData",JSON.stringify(R))}),[R]),Object(n.useEffect)((function(){localStorage.setItem("active",JSON.stringify(L))}),[L]);var _={loggedIn:m,setLoggedIn:f,userData:v,setUserData:b,showError:j,setShowError:N,token:I,setToken:x,repoData:w,setRepoData:C,issueData:R,setIssueData:B,active:L,setActive:U,loading:G,setLoading:z};return r.a.createElement(p.Provider,{value:_},e.children)};var g=function(){var e=Object(n.useContext)(p),t=e.setLoggedIn,a=e.setUserData,s=e.showError,c=e.setShowError,o=e.setToken;function l(){return(l=Object(m.a)(u.a.mark((function e(){var n,r,s,l;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=document.getElementById("token"),document.querySelector("form.api").addEventListener("submit",(function(e){e.preventDefault(),console.log(n.value)})),r={Authorization:"Token ".concat(n.value)},"https://api.github.com/user",e.next=6,fetch("https://api.github.com/user",{method:"GET",headers:r});case 6:return s=e.sent,e.next=9,s.json();case 9:l=e.sent,console.log(l),"Bad credentials"===l.message?(t(!1),c("Bad Credentials. Please try again.")):(t(!0),a(l),o(n.value));case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return r.a.createElement("div",{className:"form"},r.a.createElement("div",{style:{margin:"0 50px"}},r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement("i",{className:"fab fa-github"})),r.a.createElement("h1",null,"Welcome!"),r.a.createElement("form",{className:"api"},r.a.createElement("p",null,"API Key:"),r.a.createElement("p",{style:{fontSize:"10px",color:"red"}},s),r.a.createElement("input",{id:"token",type:"text",placeholder:"Github API Key"}),r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement("button",{type:"submit",className:"myButton",onClick:function(){return l.apply(this,arguments)}},"Submit")))))};var E=function(e){var t={},a=Object(n.useContext)(p),s=a.token,c=a.setIssueData,o=a.active,l=a.setActive,i=a.setLoading;function d(){return(d=Object(m.a)(u.a.mark((function a(){var n,r,o,m;return u.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return l(e.repoKey),n={Authorization:"Token ".concat(s)},r=e.repoURL+"/issues",i(!0),a.next=6,fetch(r,{method:"GET",headers:n});case 6:return o=a.sent,a.next=9,o.json();case 9:m=a.sent,setTimeout((function(){i(!1)}),800),console.log(m),t=m.reduce((function(e,t){return e[t.id]={issueTitle:t.title,issueCreated:t.created_at,issueUpdated:t.updated_at,issueAvatar:t.user.avatar_url,issueId:t.id},e}),{}),console.log(t),c(t);case 15:case"end":return a.stop()}}),a)})))).apply(this,arguments)}return r.a.createElement("div",null,r.a.createElement("div",{className:o===e.repoKey?"active-repo-item":"repo-item",onClick:function(){return d.apply(this,arguments)}},r.a.createElement("p",null,e.repoName)))},v=a(7);var b=function(e){var t=Object(n.useContext)(p).loading,a=new Date(e.issueCreated),s=a.getMonth()+1,c=a.getDate(),o=a.getFullYear();return!0===t?r.a.createElement("div",{className:"issue-item"},r.a.createElement(v.BeatLoader,{color:"#bf79df"})):r.a.createElement("div",null,r.a.createElement("div",{className:"issue-item"},r.a.createElement("div",{className:"sort-icon"},r.a.createElement("i",{className:"fas fa-sort"})),r.a.createElement("div",{className:"issue-avatar"},r.a.createElement("img",{style:{position:"relative",bottom:"13px"},className:"profile-pic",src:"https://avatars3.githubusercontent.com/u/66088201?v=4",alt:"profile-pic"})),r.a.createElement("div",{className:"issue-context"},r.a.createElement("p",null,e.issueTitle),r.a.createElement("p",{className:"issue-dates"},"Date Created: ",s,"/",c,"/",o),r.a.createElement("p",{className:"issue-dates"},"Last Updated: ",function(e){var t=new Date(e),a=Math.floor((new Date-t)/1e3),n=Math.floor(a/31536e3),r=Math.floor(a/2592e3),s=Math.floor(a/86400);if(s>548)return n+" years ago";if(s>=320&&s<=547)return"a year ago";if(s>=45&&s<=319)return r+" months ago";if(s>=26&&s<=45)return"a month ago";var c=Math.floor(a/3600);if(c>=36&&s<=25)return s+" days ago";if(c>=22&&c<=35)return"a day ago";var o=Math.floor(a/60);return o>=90&&c<=21?c+" hours ago":o>=45&&o<=89?"an hour ago":a>=90&&o<=44?o+" minutes ago":a>=45&&a<=89?"a minute ago":a>=0&&a<=45?"a few seconds ago":void 0}(e.issueUpdated)))))};var h=function(){return!0===Object(n.useContext)(p).loading?r.a.createElement("div",{className:"issue-item"},r.a.createElement(v.BeatLoader,{color:"#bf79df"})):r.a.createElement("div",null,r.a.createElement("div",{className:"issue-item"},r.a.createElement("p",null,r.a.createElement("i",{class:"fas fa-check-circle"})," No Open Issues!")))},O=a(8);var j=function(){var e=Object(n.useContext)(p),t=e.userData,a=e.repoData,s=e.setRepoData,c=e.token,o=e.issueData,l=e.setIssueData,i={};function d(){return(d=Object(m.a)(u.a.mark((function e(){var t,a,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={Authorization:"Token ".concat(c)},"https://api.github.com/user/repos",e.next=4,fetch("https://api.github.com/user/repos",{method:"GET",headers:t});case 4:return a=e.sent,e.next=7,a.json();case 7:n=e.sent,console.log(n),i=n.reduce((function(e,t){return e[t.id]={repoKey:t.id,repoName:t.name,repoURL:t.url},e}),{}),s(i);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(n.useEffect)((function(){!function(){d.apply(this,arguments)}()}),[c]),r.a.createElement("div",{className:"dashboard"},r.a.createElement("h1",{className:"greeting"},"Hi, ",null===t.name?t.login:t.name,"!"),r.a.createElement("img",{className:"profile-pic",src:t.avatar_url,alt:"profile-pic"}),r.a.createElement("br",null),r.a.createElement("div",{className:"repos-container"},Object.values(a).map((function(e){var t=e.repoName,a=e.repoURL,n=e.repoKey;return r.a.createElement(E,{repoURL:a,repoName:t,repoKey:n})}))),r.a.createElement(O.a,{onDragEnd:function(e){if(e.destination){var t=e.source.index,a=e.destination.index,n=Object.values(o);console.log(n),n.splice(a,0,n.splice(t,1)[0]),l(n)}}},r.a.createElement(O.c,{droppableId:"droppable-1"},(function(e){return r.a.createElement("div",Object.assign({ref:e.innerRef},e.droppableProps,{className:"issues-container"}),0===Object.keys(o).length?r.a.createElement(h,null):Object.values(o).map((function(e,t){var a=e.issueTitle,n=e.issueCreated,s=e.issueUpdated,c=e.issueId;return r.a.createElement(O.b,{key:c,draggableId:"draggable-"+c,index:t},(function(e){return r.a.createElement("div",Object.assign({ref:e.innerRef},e.draggableProps,e.dragHandleProps),r.a.createElement(b,{key:c,issueTitle:a,issueCreated:n,issueUpdated:s,issueId:c,index:t}))}))})),e.placeholder)}))))};var N=function(){var e=Object(n.useContext)(p).loggedIn;return r.a.createElement("div",null,r.a.createElement(o,null),!0===e?r.a.createElement(j,null):r.a.createElement(g,null),r.a.createElement(l,null))};c.a.render(r.a.createElement(f,null,r.a.createElement(N,null)),document.getElementById("root"))}},[[16,1,2]]]);
//# sourceMappingURL=main.dcf5de32.chunk.js.map